<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é¦¬æ‹‰æ¾å„²è“„æˆ¶å£ - è€Bestçš„å¤§è‡ªåœ¨ç©ºé–“</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .cash-rebate {
            font-size: 14px;
            color: #0077ed;
            margin-top: 5px;
        }
        
        .promo-details {
            background: #f5f5f7;
            border-radius: 12px;
            margin-top: 20px;
            overflow: hidden;
        }
        
        .promo-toggle {
            padding: 15px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 500;
        }
        
        .promo-toggle:hover {
            background: #ebecef;
        }
        
        .toggle-icon {
            transition: transform 0.3s ease;
        }
        
        .promo-content {
            padding: 0 15px;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease, padding 0.3s ease;
        }
        
        .promo-content.expanded {
            padding: 0 15px 15px;
            max-height: 200px;
        }
        
        .promo-content h3 {
            margin-bottom: 10px;
            color: #1d1d1f;
            font-size: 16px;
        }
        
        .promo-content p {
            margin-bottom: 10px;
            color: #86868b;
            font-size: 14px;
        }
        
        .promo-content ul {
            list-style-type: none;
            padding-left: 0;
            color: #86868b;
            font-size: 14px;
        }
        
        .promo-content li {
            margin-bottom: 5px;
        }
        
        .total-with-rebate {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #d2d2d7;
        }
        
        .breakdown {
            margin-bottom: 10px;
        }
        
        .breakdown-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 14px;
        }
        
        .breakdown-label {
            color: #86868b;
        }
        
        .breakdown-value {
            color: #1d1d1f;
            font-weight: 500;
        }
        
        .total-summary {
            display: flex;
            justify-content: space-between;
            font-weight: 600;
            font-size: 16px;
            color: #0077ed;
        }
        
        .total-label {
            color: #1d1d1f;
        }
        
        .total-value {
            font-weight: 600;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- é¡µé¢é¡¶éƒ¨ HEADER - å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
        <header class="page-header">
            <!-- Headerå†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
        </header>

        <div class="page-content">
            <div class="page-header-content">
                <h1>æ¸£æ‰“æ´»æœŸé¦¬æ‹‰æ¾å„²è“„æˆ¶å£åˆ†æ</h1>
            </div>

            <main>
                <section class="video-section">
                    <h2>ç›¸é—œå½±ç‰‡è§£èªª</h2>
                    <div class="video-container">
                        <iframe width="560" height="315" src="https://www.youtube.com/embed/LwUs76HHxQg?si=JJhMAEQUH7v7HLDX" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
                    </div>
                </section>

                <section class="content">
                    <h2>ç‚ºä»€éº¼é¸æ“‡é¦¬æ‹‰æ¾å„²è“„æˆ¶å£ï¼Ÿ</h2>
                    <div class="feature-grid">
                        <div class="feature-card">
                            <h3>é«˜åˆ©ç‡å›å ±</h3>
                            <p>äº«å—å¸‚å ´é ˜å…ˆçš„å„²è“„åˆ©ç‡ï¼Œè®“æ‚¨çš„è³‡é‡‘ç©©å¥å¢é•·</p>
                        </div>
                        <div class="feature-card">
                            <h3>éˆæ´»å­˜å–</h3>
                            <p>éš¨æ™‚å­˜å–è³‡é‡‘ï¼ŒåŒæ™‚ä¿æŒé«˜æ”¶ç›Š</p>
                        </div>
                        <div class="feature-card">
                            <h3>é›¶æ‰‹çºŒè²»</h3>
                            <p>ç„¡ä»»ä½•éš±è—æ”¶è²»ï¼Œæ¯ä¸€åˆ†éŒ¢éƒ½åœ¨ç‚ºæ‚¨å·¥ä½œ</p>
                        </div>
                    </div>
                </section>

                <section class="calculator">
                    <h2>æ¸£æ‰“é¦¬æ‹‰æ¾å„²è“„æˆ¶å£æ”¶ç›Šè¨ˆç®—æ©Ÿ</h2>
                    
                    <!-- è´§å¸åˆ†é¡µ -->
                    <div class="currency-tabs">
                        <button class="tab-button active" onclick="switchCurrency('hkd', this)">æ¸¯å…ƒ</button>
                        <button class="tab-button" onclick="switchCurrency('usd', this)">ç¾å…ƒ</button>
                    </div>

                    <!-- æ¸¯å…ƒå†…å®¹ -->
                    <div id="hkd-content" class="tab-content active">
                        <div class="phases-container">
                            <!-- ç¬¬ä¸€éšæ®µ -->
                            <div class="phase-section">
                                <div class="phase-title">
                                    <div class="phase-number">1</div>
                                    é¦–éšæ®µï¼ˆé–‹æˆ¶æ—¥è‡³2025å¹´11æœˆ2æ—¥ï¼‰
                                </div>
                                <div class="form-group">
                                    <label for="hkd-start-date">é–‹æˆ¶æ—¥æœŸ</label>
                                    <input type="date" id="hkd-start-date" min="2024-01-01" max="2025-11-02" onchange="calculatePhase('hkd', 1)">
                                </div>
                                <div class="rate-input-group">
                                    <span class="rate-label">å¹´åˆ©ç‡ï¼š</span>
                                    <input type="number" class="rate-input" id="hkd-phase1-rate" value="1.6" step="0.01" min="0" onchange="calculatePhase('hkd', 1)">
                                    <span>%</span>
                                </div>
                                <div class="form-group">
                                    <label for="hkd-phase1-amount">å­˜æ¬¾é‡‘é¡ (HKD)</label>
                                    <input type="number" id="hkd-phase1-amount" min="1" value="10000" step="100" onchange="validateAmount('hkd'); calculatePhase('hkd', 1)">
                                </div>
                                <div class="earnings-display" id="hkd-phase1-earnings">
                                    æœŸå…§æ”¶ç›Šï¼š$0.00
                                </div>
                            </div>

                            <!-- ç¬¬äºŒéšæ®µ -->
                            <div class="phase-section">
                                <div class="phase-title">
                                    <div class="phase-number">2</div>
                                    ç¬¬äºŒéšæ®µï¼ˆ2025å¹´11æœˆ3æ—¥è‡³30æ—¥ï¼‰
                                </div>
                                <div class="rate-input-group">
                                    <span class="rate-label">å¹´åˆ©ç‡ï¼š</span>
                                    <input type="number" class="rate-input" id="hkd-phase2-rate" value="1.8" step="0.01" min="0" onchange="calculatePhase('hkd', 2)">
                                    <span>%</span>
                                </div>
                                <div class="form-group">
                                    <label for="hkd-phase2-amount">å­˜æ¬¾é‡‘é¡ (HKD)</label>
                                    <input type="number" id="hkd-phase2-amount" min="1" value="10000" step="100" onchange="validateAmount('hkd'); calculatePhase('hkd', 2)">
                                </div>
                                <div class="earnings-display" id="hkd-phase2-earnings">
                                    æœŸå…§æ”¶ç›Šï¼š$0.00
                                </div>
                            </div>

                            <!-- ç¬¬ä¸‰éšæ®µ -->
                            <div class="phase-section">
                                <div class="phase-title">
                                    <div class="phase-number">3</div>
                                    ç¬¬ä¸‰éšæ®µï¼ˆ2025å¹´12æœˆ1æ—¥è‡³2026å¹´1æœˆ5æ—¥ï¼‰
                                </div>
                                <div class="rate-input-group">
                                    <span class="rate-label">å¹´åˆ©ç‡ï¼š</span>
                                    <input type="number" class="rate-input" id="hkd-phase3-rate" value="3.2" step="0.01" min="0" onchange="calculatePhase('hkd', 3)">
                                    <span>%</span>
                                </div>
                                <div class="form-group">
                                    <label for="hkd-phase3-amount">å­˜æ¬¾é‡‘é¡ (HKD)</label>
                                    <input type="number" id="hkd-phase3-amount" min="1" value="10000" step="100" onchange="validateAmount('hkd'); calculatePhase('hkd', 3)">
                                </div>
                                <div class="earnings-display" id="hkd-phase3-earnings">
                                    æœŸå…§æ”¶ç›Šï¼š$0.00
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ç¾å…ƒå†…å®¹ -->
                    <div id="usd-content" class="tab-content">
                        <div class="phases-container">
                            <!-- ç¬¬ä¸€éšæ®µ -->
                            <div class="phase-section">
                                <div class="phase-title">
                                    <div class="phase-number">1</div>
                                    é¦–éšæ®µï¼ˆé–‹æˆ¶æ—¥è‡³2025å¹´11æœˆ2æ—¥ï¼‰
                                </div>
                                <div class="form-group">
                                    <label for="usd-start-date">é–‹æˆ¶æ—¥æœŸ</label>
                                    <input type="date" id="usd-start-date" min="2024-01-01" max="2025-11-02" onchange="calculatePhase('usd', 1)">
                                </div>
                                <div class="rate-input-group">
                                    <span class="rate-label">å¹´åˆ©ç‡ï¼š</span>
                                    <input type="number" class="rate-input" id="usd-phase1-rate" value="3.1" step="0.01" min="0" onchange="calculatePhase('usd', 1)">
                                    <span>%</span>
                                </div>
                                <div class="form-group">
                                    <label for="usd-phase1-amount">å­˜æ¬¾é‡‘é¡ (USD)</label>
                                    <input type="number" id="usd-phase1-amount" min="1" value="2000" step="100" onchange="validateAmount('usd'); calculatePhase('usd', 1)">
                                </div>
                                <div class="earnings-display" id="usd-phase1-earnings">
                                    æœŸå…§æ”¶ç›Šï¼š$0.00
                                </div>
                            </div>

                            <!-- ç¬¬äºŒéšæ®µ -->
                            <div class="phase-section">
                                <div class="phase-title">
                                    <div class="phase-number">2</div>
                                    ç¬¬äºŒéšæ®µï¼ˆ2025å¹´11æœˆ3æ—¥è‡³30æ—¥ï¼‰
                                </div>
                                <div class="rate-input-group">
                                    <span class="rate-label">å¹´åˆ©ç‡ï¼š</span>
                                    <input type="number" class="rate-input" id="usd-phase2-rate" value="3.2" step="0.01" min="0" onchange="calculatePhase('usd', 2)">
                                    <span>%</span>
                                </div>
                                <div class="form-group">
                                    <label for="usd-phase2-amount">å­˜æ¬¾é‡‘é¡ (USD)</label>
                                    <input type="number" id="usd-phase2-amount" min="1" value="2000" step="100" onchange="validateAmount('usd'); calculatePhase('usd', 2)">
                                </div>
                                <div class="earnings-display" id="usd-phase2-earnings">
                                    æœŸå…§æ”¶ç›Šï¼š$0.00
                                </div>
                            </div>

                            <!-- ç¬¬ä¸‰éšæ®µ -->
                            <div class="phase-section">
                                <div class="phase-title">
                                    <div class="phase-number">3</div>
                                    ç¬¬ä¸‰éšæ®µï¼ˆ2025å¹´12æœˆ1æ—¥è‡³2026å¹´1æœˆ5æ—¥ï¼‰
                                </div>
                                <div class="rate-input-group">
                                    <span class="rate-label">å¹´åˆ©ç‡ï¼š</span>
                                    <input type="number" class="rate-input" id="usd-phase3-rate" value="3.6" step="0.01" min="0" onchange="calculatePhase('usd', 3)">
                                    <span>%</span>
                                </div>
                                <div class="form-group">
                                    <label for="usd-phase3-amount">å­˜æ¬¾é‡‘é¡ (USD)</label>
                                    <input type="number" id="usd-phase3-amount" min="1" value="2000" step="100" onchange="validateAmount('usd'); calculatePhase('usd', 3)">
                                </div>
                                <div class="earnings-display" id="usd-phase3-earnings">
                                    æœŸå…§æ”¶ç›Šï¼š$0.00
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="result" id="result">
                        <div class="result-title">ç¸½æ”¶ç›Š</div>
                        <div class="total-result">
                            <div id="total-currency">æ¸¯å…ƒ</div>
                            <div class="total-amount" id="total-earnings">$0.00</div>
                            <div class="cash-rebate" id="cash-rebate"></div>
                            <div class="total-with-rebate" id="total-with-rebate" style="display: none;">
                                <div class="breakdown">
                                    <div class="breakdown-item">
                                        <span class="breakdown-label">åŸºç¤åˆ©ç‡ç¸½æ”¶ç›Šï¼š</span>
                                        <span class="breakdown-value" id="base-interest">$0.00</span>
                                    </div>
                                    <div class="breakdown-item">
                                        <span class="breakdown-label">æ–°å®¢æˆ¶ç¾é‡‘å›è´ˆï¼š</span>
                                        <span class="breakdown-value" id="rebate-amount">$0.00</span>
                                    </div>
                                </div>
                                <div class="total-summary">
                                    <span class="total-label">ç¸½è¨ˆï¼š</span>
                                    <span class="total-value" id="grand-total">$0.00</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ä¼˜æƒ è¯¦æƒ…åŒºå— -->
                    <div class="promo-details">
                        <div class="promo-toggle" onclick="togglePromoDetails()">
                            <span>é™æ™‚æ–°å®¢æˆ¶å„ªæƒ ï¼šé«˜é”HK$1,888ç¾é‡‘å›è´ˆ</span>
                            <span class="toggle-icon">â–¼</span>
                        </div>
                        <div class="promo-content" id="promo-content">
                            <h3>å„ªæƒ è©³æƒ…</h3>
                            <p>æ–¼2025å¹´9æœˆ6æ—¥å‰é–‹ç«‹æ¸¯å…ƒæŒ‡å®šæˆ¶å£åŠç¶­æŒä»¥ä¸‹å­˜æ¬¾çµé¤˜è¦æ±‚è‡³2026å¹´1æœˆ5æ—¥ï¼š</p>
                            <ul>
                                <li>âœ“ HK$1,000,000è‡³HK$2,000,000: HK$688 ç¾é‡‘å›è´ˆ</li>
                                <li>âœ“ HK$2,000,000æˆ–ä»¥ä¸Š: HK$1,888 ç¾é‡‘å›è´ˆ</li>
                            </ul>
                        </div>
                    </div>

                    <!-- æ¯”è¾ƒå·¥å…· -->
                    <div class="comparison-tool">
                        <div class="comparison-header">
                            <h3>èˆ‡ä¸€èˆ¬å®šæœŸå­˜æ¬¾é€²è¡Œæ¯”è¼ƒ</h3>
                            <div class="comparison-selector">
                                <label for="comparison-period">é¸æ“‡æ¯”è¼ƒæœŸ</label>
                                <select id="comparison-period" onchange="toggleComparisonInputs()">
                                    <option value="1">1å€‹æœˆå®šæœŸå­˜æ¬¾</option>
                                    <option value="3">3å€‹æœˆå®šæœŸå­˜æ¬¾</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="comparison-content">
                            <!-- 1å€‹æœˆå®šæœŸå­˜æ¬¾æ¯”è¼ƒ -->
                            <div id="one-month-comparison" class="comparison-section">
                                <div class="comparison-inputs">
                                    <div class="input-group">
                                        <label for="month1-rate1">é¦–éšæ®µå®šæœŸå­˜æ¬¾å¹´åˆ©ç‡</label>
                                        <div class="input-wrapper">
                                            <input type="number" id="month1-rate1" value="2" step="0.01" min="0" onchange="calculateComparison()">
                                            <span class="input-suffix">%</span>
                                        </div>
                                        <div class="reference-earnings" id="month1-ref1">åƒè€ƒæ”¶ç›Šï¼š$0.00</div>
                                    </div>
                                    <div class="input-group">
                                        <label for="month1-rate2">ç¬¬äºŒéšæ®µå®šæœŸå­˜æ¬¾å¹´åˆ©ç‡</label>
                                        <div class="input-wrapper">
                                            <input type="number" id="month1-rate2" value="2" step="0.01" min="0" onchange="calculateComparison()">
                                            <span class="input-suffix">%</span>
                                        </div>
                                        <div class="reference-earnings" id="month1-ref2">åƒè€ƒæ”¶ç›Šï¼š$0.00</div>
                                    </div>
                                    <div class="input-group">
                                        <label for="month1-rate3">ç¬¬ä¸‰éšæ®µå®šæœŸå­˜æ¬¾å¹´åˆ©ç‡</label>
                                        <div class="input-wrapper">
                                            <input type="number" id="month1-rate3" value="2" step="0.01" min="0" onchange="calculateComparison()">
                                            <span class="input-suffix">%</span>
                                        </div>
                                        <div class="reference-earnings" id="month1-ref3">åƒè€ƒæ”¶ç›Šï¼š$0.00</div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 3å€‹æœˆå®šæœŸå­˜æ¬¾æ¯”è¼ƒ -->
                            <div id="three-month-comparison" class="comparison-section" style="display: none;">
                                <div class="comparison-inputs">
                                    <div class="input-group">
                                        <label for="month3-rate">3å€‹æœˆå®šæœŸå­˜æ¬¾å¹´åˆ©ç‡</label>
                                        <div class="input-wrapper">
                                            <input type="number" id="month3-rate" value="2.5" step="0.01" min="0" onchange="calculateComparison()">
                                            <span class="input-suffix">%</span>
                                        </div>
                                        <div class="reference-earnings" id="month3-ref">åƒè€ƒæ”¶ç›Šï¼š$0.00</div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- æ¯”è¼ƒçµæœ -->
                            <div class="comparison-result">
                                <div class="result-row">
                                    <div class="result-label">é¦¬æ‹‰æ¾å„²è“„æˆ¶å£ç¸½æ”¶ç›Š</div>
                                    <div class="result-value" id="marathon-earnings">$0.00</div>
                                </div>
                                <div class="result-row">
                                    <div class="result-label">ä¸€èˆ¬å®šæœŸå­˜æ¬¾ç¸½æ”¶ç›Š</div>
                                    <div class="result-value" id="fixed-earnings">$0.00</div>
                                </div>
                                <div class="result-row highlight">
                                    <div class="result-label">æ”¶ç›Šå·®é¡</div>
                                    <div class="result-value">
                                        <span id="earnings-difference">$0.00</span>
                                        <span id="comparison-emoji">ğŸ¤”</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="referral-section">
                        <div class="referral-title">è€Best å¥½å‹æ¨è–¦é€£çµ</div>
                        <a href="https://www.sc.com/hk/zh/referral/?p=marathon&referid=E4309937" target="_blank" class="referral-link">
                            https://www.sc.com/hk/zh/referral/?p=marathon&referid=E4309937
                        </a>
                        <p class="referral-description">
                            é€éè€Bestå¥½å‹æ¨è–¦ç”³è«‹ï¼Œå¯ä»¤è€Bestæ”¶åˆ°ä¸€äº›æ¨è–¦å›è´ˆ, é›–ç„¶ä¸èƒ½ä»¤è€Bestç™¼å®¶è‡³å¯Œï¼Œä½†ä»¤è€Bestå¿ƒæ‡·æ„Ÿæ¿€åŠå®‰æ…°ã€‚
                        </p>
                    </div>

                    <div class="note">
                        <strong>æ³¨æ„ï¼š</strong>
                        <ul>
                            <li>ä»¥ä¸Šè¨ˆç®—çµæœåƒ…ä¾›åƒè€ƒï¼Œå¯¦éš›æ”¶ç›Šå¯èƒ½å› å¸‚å ´æƒ…æ³è€Œæœ‰æ‰€è®Šå‹•</li>
                            <li>æ”¶ç›Šè¨ˆç®—åŸºæ–¼å–®åˆ©è¨ˆç®—æ–¹å¼</li>
                            <li>æ¸¯å…ƒä¸€å¹´æŒ‰365å¤©è¨ˆç®—ï¼Œç¾å…ƒä¸€å¹´æŒ‰360å¤©è¨ˆç®—</li>
                            <li>å¯¦éš›åˆ©ç‡ä»¥éŠ€è¡Œå…¬ä½ˆç‚ºæº–</li>
                            <li>æ­¤ç”¢å“åªé©åˆæ–°è³‡é‡‘å­˜æ¬¾</li>
                            <li>ç”¢å“ç¶²é è©³æƒ…å¯åƒè€ƒï¼š<a href="https://www.sc.com/hk/zh/deposits/marathon-savings-account/" target="_blank">https://www.sc.com/hk/zh/deposits/marathon-savings-account/</a></li>
                            <li>ç¾å…ƒåŠäººæ°‘å¹£è½‰å‡ºè½‰å…¥æ¶‰åŠæ‰‹çºŒè²»ï¸°æ¸£æ‰“ï¸°åŒ¯å…¥å…è²»ï¼ŒåŒ¯å‡ºRMB$170/æ”¶USD$22 ï¼Œæ¯æ—¥è½‰å¸³ä¸Šé™ç­‰å€¼100è¬ ã€‚</li>
                        </ul>
                    </div>
                </section>
            </main>

            <!-- é¡µé¢åº•éƒ¨ FOOTER - å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
            <footer>
                <!-- Footerå†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
            </footer>
        </div>
    </div>

    <!-- æç¤ºæ¡† -->
    <div class="overlay" id="overlay"></div>
    <div class="alert" id="alert">
        <div class="alert-title">å­˜æ¬¾é‡‘é¡æç¤º</div>
        <div class="alert-message" id="alert-message"></div>
        <button class="alert-button" onclick="closeAlert()">ç¢ºå®š</button>
    </div>

    <script src="common.js"></script>
    <script>
        let currentCurrency = 'hkd';

        // æ ¼å¼åŒ–é‡‘é¡ï¼Œæ·»åŠ åƒä½ç¬¦è™Ÿ
        function formatAmount(amount) {
            return amount.toLocaleString('en-US', {
                minimumFractionDigits: 2,
                maximumFractionDigits: 2
            });
        }

        function switchCurrency(currency, buttonElement) {
            // æ›´æ–°åˆ†é¡µæŒ‰é’®çŠ¶æ€
            document.querySelectorAll('.tab-button').forEach(button => {
                button.classList.remove('active');
            });
            buttonElement.classList.add('active');

            // æ›´æ–°å†…å®¹æ˜¾ç¤º
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(`${currency}-content`).classList.add('active');

            currentCurrency = currency;
            
            // æ›´æ–°æ€»æ”¶ç›Šæ˜¾ç¤ºçš„è´§å¸
            document.getElementById('total-currency').textContent = currency === 'hkd' ? 'æ¸¯å…ƒ' : 'ç¾å…ƒ';
            
            // æ ¹æ®è´§å¸è®¾ç½®æ¯”è¾ƒå·¥å…·çš„é»˜è®¤åˆ©ç‡
            if (currency === 'hkd') {
                // æ¸¯å¸é»˜è®¤åˆ©ç‡
                document.getElementById('month1-rate1').value = 2;
                document.getElementById('month1-rate2').value = 2;
                document.getElementById('month1-rate3').value = 2;
                document.getElementById('month3-rate').value = 2.5;
            } else {
                // ç¾å…ƒé»˜è®¤åˆ©ç‡
                document.getElementById('month1-rate1').value = 2.5;
                document.getElementById('month1-rate2').value = 2.5;
                document.getElementById('month1-rate3').value = 2.5;
                document.getElementById('month3-rate').value = 3.6;
            }
            
            // å¦‚æœåˆ‡æ¢åˆ°æ¸¯å¸ï¼Œæ›´æ–°ç°é‡‘å›èµ æ˜¾ç¤º
            if (currency === 'hkd') {
                updateCashRebate();
            } else {
                document.getElementById('cash-rebate').textContent = "";
                document.getElementById('total-with-rebate').style.display = 'none';
            }
            
            // é‡æ–°è®¡ç®—æ€»æ”¶ç›Š
            calculateTotal();
            calculateComparison();
        }

        function validateAmount(currency) {
            const minAmount = currency === 'hkd' ? 10000 : 2000;
            const maxAmount = currency === 'hkd' ? 10000000 : 1300000;
            
            for (let i = 1; i <= 3; i++) {
                const amount = parseFloat(document.getElementById(`${currency}-phase${i}-amount`).value) || 0;
                
                if (amount < minAmount) {
                    showAlert(`å­˜æ¬¾é‡‘é¡ä¸èƒ½å°‘æ–¼ ${currency === 'hkd' ? 'HK$' : 'US$'}${formatAmount(minAmount)}`);
                    document.getElementById(`${currency}-phase${i}-amount`).value = minAmount;
                    return;
                }
                
                if (amount > maxAmount) {
                    showAlert(`å­˜æ¬¾é‡‘é¡ä¸èƒ½å¤šæ–¼ ${currency === 'hkd' ? 'HK$' : 'US$'}${formatAmount(maxAmount)}`);
                    document.getElementById(`${currency}-phase${i}-amount`).value = maxAmount;
                    return;
                }
            }
        }

        function showAlert(message) {
            document.getElementById('alert-message').textContent = message;
            document.getElementById('alert').classList.add('show');
            document.getElementById('overlay').classList.add('show');
        }

        function closeAlert() {
            document.getElementById('alert').classList.remove('show');
            document.getElementById('overlay').classList.remove('show');
        }

        function calculatePhase(currency, phase) {
            const amount = parseFloat(document.getElementById(`${currency}-phase${phase}-amount`).value) || 0;
            const rate = parseFloat(document.getElementById(`${currency}-phase${phase}-rate`).value) || 0;
            
            // è®¡ç®—é˜¶æ®µæ”¶ç›Š
            let daysInPhase = 0;
            if (phase === 1) {
                // ç¬¬ä¸€é˜¶æ®µï¼šç”¨æˆ·é€‰æ‹©çš„é–‹æˆ¶æ—¥è‡³2025å¹´11æœˆ2æ—¥
                const startDateInput = document.getElementById(`${currency}-start-date`);
                const startDate = startDateInput.value ? new Date(startDateInput.value) : new Date();
                const endDate = new Date('2025-11-02');
                daysInPhase = Math.ceil((endDate - startDate) / (1000 * 60 * 60 * 24));
                
                // ç¡®ä¿å¤©æ•°ä¸ä¸ºè´Ÿæ•°
                if (daysInPhase < 0) {
                    daysInPhase = 0;
                }
            } else if (phase === 2) {
                // ç¬¬äºŒé˜¶æ®µï¼š2025å¹´11æœˆ3æ—¥è‡³30æ—¥
                daysInPhase = 27; // 11æœˆ3æ—¥åˆ°11æœˆ30æ—¥
            } else if (phase === 3) {
                // ç¬¬ä¸‰é˜¶æ®µï¼š2025å¹´12æœˆ1æ—¥è‡³2026å¹´1æœˆ5æ—¥
                daysInPhase = 35; // 12æœˆ1æ—¥åˆ°1æœˆ5æ—¥
            }
            
            // æ ¹æ®è´§å¸é€‰æ‹©ä¸åŒçš„å¤©æ•°
            const daysInYear = currency === 'hkd' ? 365 : 360;
            const earnings = amount * (rate / 100 / daysInYear) * daysInPhase;
            
            // æ›´æ–°é˜¶æ®µæ”¶ç›Šæ˜¾ç¤º
            document.getElementById(`${currency}-phase${phase}-earnings`).textContent = 
                `æœŸå…§æ”¶ç›Šï¼š$${formatAmount(earnings)}`;
            
            // å¦‚æœæ˜¯ç¬¬3é˜¶æ®µä¸”æ˜¯æ¸¯å¸ï¼Œæ›´æ–°ç°é‡‘å›èµ æ˜¾ç¤º
            if (phase === 3 && currency === 'hkd') {
                updateCashRebate();
            }
            
            // å¦‚æœæ˜¯å½“å‰æ˜¾ç¤ºçš„è´§å¸ï¼Œæ›´æ–°æ€»æ”¶ç›Š
            if (currency === currentCurrency) {
                calculateTotal();
                calculateComparison();
            }
        }

        // ç²å–ç¸½æ”¶ç›Š
        function getTotalEarnings() {
            let totalEarnings = 0;
            
            // è®¡ç®—å½“å‰è´§å¸æ‰€æœ‰é˜¶æ®µçš„æ”¶ç›Šæ€»å’Œ
            for (let i = 1; i <= 3; i++) {
                const amount = parseFloat(document.getElementById(`${currentCurrency}-phase${i}-amount`).value) || 0;
                const rate = parseFloat(document.getElementById(`${currentCurrency}-phase${i}-rate`).value) || 0;
                
                let daysInPhase = 0;
                if (i === 1) {
                    const startDateInput = document.getElementById(`${currentCurrency}-start-date`);
                    const startDate = startDateInput.value ? new Date(startDateInput.value) : new Date();
                    const endDate = new Date('2025-11-02');
                    daysInPhase = Math.ceil((endDate - startDate) / (1000 * 60 * 60 * 24));
                    
                    // ç¡®ä¿å¤©æ•°ä¸ä¸ºè´Ÿæ•°
                    if (daysInPhase < 0) {
                        daysInPhase = 0;
                    }
                } else if (i === 2) {
                    daysInPhase = 28;
                } else if (i === 3) {
                    daysInPhase = 36;
                }
                
                // æ ¹æ®è´§å¸é€‰æ‹©ä¸åŒçš„å¤©æ•°
                const daysInYear = currentCurrency === 'hkd' ? 365 : 360;
                const earnings = amount * (rate / 100 / daysInYear) * daysInPhase;
                totalEarnings += earnings;
            }
            
            return totalEarnings;
        }

        function calculateTotal() {
            const totalEarnings = getTotalEarnings();
            
            // æ›´æ–°æ€»æ”¶ç›Šæ˜¾ç¤º
            document.getElementById('total-earnings').textContent = 
                `$${formatAmount(totalEarnings)}`;
                
            return totalEarnings;
        }

        // åˆ‡æ›æ¯”è¼ƒè¼¸å…¥æ¡†
        function toggleComparisonInputs() {
            const period = document.getElementById('comparison-period').value;
            const oneMonthComparison = document.getElementById('one-month-comparison');
            const threeMonthComparison = document.getElementById('three-month-comparison');
            
            if (period === '1') {
                oneMonthComparison.style.display = 'block';
                threeMonthComparison.style.display = 'none';
            } else {
                oneMonthComparison.style.display = 'none';
                threeMonthComparison.style.display = 'block';
            }
            
            calculateComparison();
        }

        // è¨ˆç®—æ¯”è¼ƒçµæœ
        function calculateComparison() {
            const marathonEarnings = getTotalEarnings();
            let fixedEarnings = 0;
            const period = document.getElementById('comparison-period').value;
            const currency = currentCurrency;
            
            if (period === '1') {
                // 1å€‹æœˆå®šæœŸå­˜æ¬¾æ¯”è¼ƒ
                for (let i = 1; i <= 3; i++) {
                    const amount = parseFloat(document.getElementById(`${currency}-phase${i}-amount`).value) || 0;
                    const rate = parseFloat(document.getElementById(`month1-rate${i}`).value) || 0;
                    
                    let daysInPhase = 0;
                    if (i === 1) {
                        const startDateInput = document.getElementById(`${currency}-start-date`);
                        const startDate = startDateInput.value ? new Date(startDateInput.value) : new Date();
                        const endDate = new Date('2025-11-02');
                        daysInPhase = Math.ceil((endDate - startDate) / (1000 * 60 * 60 * 24));
                        
                        if (daysInPhase < 0) {
                            daysInPhase = 0;
                        }
                    } else if (i === 2) {
                        daysInPhase = 27;
                    } else if (i === 3) {
                        daysInPhase = 35;
                    }
                    
                    const daysInYear = currency === 'hkd' ? 365 : 360;
                    const earnings = amount * (rate / 100 / daysInYear) * daysInPhase;
                    fixedEarnings += earnings;
                    
                    // æ›´æ–°å‚è€ƒæ”¶ç›Šæ˜¾ç¤º
                    document.getElementById(`month1-ref${i}`).textContent = 
                        `åƒè€ƒæ”¶ç›Šï¼š$${formatAmount(earnings)}`;
                }
            } else {
                // 3å€‹æœˆå®šæœŸå­˜æ¬¾æ¯”è¼ƒ
                const amount = parseFloat(document.getElementById(`${currency}-phase1-amount`).value) || 0;
                const rate = parseFloat(document.getElementById('month3-rate').value) || 0;
                
                // è¨ˆç®—ç¸½å¤©æ•¸
                let totalDays = 0;
                for (let i = 1; i <= 3; i++) {
                    if (i === 1) {
                        const startDateInput = document.getElementById(`${currency}-start-date`);
                        const startDate = startDateInput.value ? new Date(startDateInput.value) : new Date();
                        const endDate = new Date('2025-11-02');
                        totalDays += Math.ceil((endDate - startDate) / (1000 * 60 * 60 * 24));
                        
                        if (totalDays < 0) {
                            totalDays = 0;
                        }
                    } else if (i === 2) {
                        totalDays += 28;
                    } else if (i === 3) {
                        totalDays += 36;
                    }
                }
                
                const daysInYear = currency === 'hkd' ? 365 : 360;
                fixedEarnings = amount * (rate / 100 / daysInYear) * totalDays;
                
                // æ›´æ–°å‚è€ƒæ”¶ç›Šæ˜¾ç¤º
                document.getElementById('month3-ref').textContent = 
                    `åƒè€ƒæ”¶ç›Šï¼š$${formatAmount(fixedEarnings)}`;
            }
            
            // æ›´æ–°æ¯”è¼ƒçµæœé¡¯ç¤º
            document.getElementById('marathon-earnings').textContent = `$${formatAmount(marathonEarnings)}`;
            document.getElementById('fixed-earnings').textContent = `$${formatAmount(fixedEarnings)}`;
            
            const difference = marathonEarnings - fixedEarnings;
            const differenceElement = document.getElementById('earnings-difference');
            differenceElement.textContent = `${difference >= 0 ? '+' : ''}$${formatAmount(Math.abs(difference))}`;
            
            // æ›´æ–°æ¯”è¼ƒçµæœè¡¨æƒ…ç¬¦è™Ÿ
            const emojiElement = document.getElementById('comparison-emoji');
            if (difference > 0) {
                emojiElement.textContent = 'ğŸ˜'; // é¦¬æ‹‰æ¾æ”¶ç›Šæ›´é«˜
            } else if (difference < 0) {
                emojiElement.textContent = 'ğŸ˜¢'; // å®šæœŸå­˜æ¬¾æ”¶ç›Šæ›´é«˜
            } else {
                emojiElement.textContent = 'ğŸ¤'; // æ”¶ç›Šç›¸åŒ
            }
        }

        // åˆ‡æ¢ä¼˜æƒ è¯¦æƒ…æ˜¾ç¤º/éšè—
        function togglePromoDetails() {
            const promoContent = document.getElementById('promo-content');
            const toggleIcon = document.querySelector('.toggle-icon');
            
            if (promoContent.classList.contains('expanded')) {
                promoContent.classList.remove('expanded');
                toggleIcon.textContent = 'â–¼';
            } else {
                promoContent.classList.add('expanded');
                toggleIcon.textContent = 'â–²';
            }
        }

        // æ›´æ–°ç°é‡‘å›èµ æ˜¾ç¤º
        function updateCashRebate() {
            const currency = currentCurrency;
            const amount = parseFloat(document.getElementById(`${currency}-phase3-amount`).value) || 0;
            const cashRebateElement = document.getElementById('cash-rebate');
            const totalWithRebateElement = document.getElementById('total-with-rebate');
            const baseInterestElement = document.getElementById('base-interest');
            const rebateAmountElement = document.getElementById('rebate-amount');
            const grandTotalElement = document.getElementById('grand-total');
            
            // è·å–åŸºç¡€åˆ©ç‡æ€»æ”¶ç›Š
            const baseInterest = getTotalEarnings();
            baseInterestElement.textContent = `$${formatAmount(baseInterest)}`;
            
            if (currency === 'hkd') {
                let rebateAmount = 0;
                let rebateText = "";
                
                if (amount >= 1000000 && amount < 2000000) {
                    rebateAmount = 688;
                    rebateText = "+ æ–°å®¢æˆ¶äº«HK$688 ç¾é‡‘å›è´ˆ";
                } else if (amount >= 2000000) {
                    rebateAmount = 1888;
                    rebateText = "+ æ–°å®¢æˆ¶äº«HK$1,888 ç¾é‡‘å›è´ˆ";
                }
                
                cashRebateElement.textContent = rebateText;
                rebateAmountElement.textContent = `$${formatAmount(rebateAmount)}`;
                
                // è®¡ç®—æ€»è®¡
                const grandTotal = baseInterest + rebateAmount;
                grandTotalElement.textContent = `$${formatAmount(grandTotal)}`;
                
                // å¦‚æœæœ‰å›èµ ï¼Œæ˜¾ç¤ºæ€»è®¡åŒºåŸŸ
                if (rebateAmount > 0) {
                    totalWithRebateElement.style.display = 'block';
                } else {
                    totalWithRebateElement.style.display = 'none';
                }
            } else {
                cashRebateElement.textContent = "";
                totalWithRebateElement.style.display = 'none';
            }
        }

        // é¡µé¢åŠ è½½æ—¶è®¡ç®—ä¸€æ¬¡
        window.onload = function() {
            // è®¾ç½®é»˜è®¤æ—¥æœŸä¸ºä»Šå¤©
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('hkd-start-date').value = today;
            document.getElementById('usd-start-date').value = today;
            
            // æ ¹æ®å½“å‰è´§å¸è®¾ç½®æ¯”è¾ƒå·¥å…·çš„é»˜è®¤åˆ©ç‡
            if (currentCurrency === 'hkd') {
                // æ¸¯å¸é»˜è®¤åˆ©ç‡
                document.getElementById('month1-rate1').value = 2;
                document.getElementById('month1-rate2').value = 2;
                document.getElementById('month1-rate3').value = 2;
                document.getElementById('month3-rate').value = 2.5;
            } else {
                // ç¾å…ƒé»˜è®¤åˆ©ç‡
                document.getElementById('month1-rate1').value = 2.5;
                document.getElementById('month1-rate2').value = 2.5;
                document.getElementById('month1-rate3').value = 2.5;
                document.getElementById('month3-rate').value = 3.6;
            }
            
            // è®¡ç®—æ‰€æœ‰é˜¶æ®µçš„æ”¶ç›Š
            ['hkd', 'usd'].forEach(currency => {
                for (let i = 1; i <= 3; i++) {
                    calculatePhase(currency, i);
                }
            });
            
            // åˆå§‹åŒ–æ¯”è¾ƒå·¥å…·
            calculateComparison();
            
            // åˆå§‹åŒ–ç°é‡‘å›èµ æ˜¾ç¤º
            updateCashRebate();
        };
    </script>
</body>
</html>
