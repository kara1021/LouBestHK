<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MOX Flexi boost savings é«˜æ¯æ´»å­˜ - è€Bestçš„å¤§è‡ªåœ¨ç©ºé–“</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <!-- é¡µé¢é¡¶éƒ¨ HEADER - å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
        <header class="page-header">
            <!-- Headerå†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
        </header>

        <div class="page-content">
            <div class="page-header-content">
                <h1>MOX FlexiBoost é«˜æ¯æ´»å­˜</h1>
            </div>

            <main>
                <section class="content">
                    <h2>ç‚ºä»€éº¼é¸æ“‡ MOX FlexiBoost é«˜æ¯æ´»å­˜ï¼Ÿ</h2>
                    <div class="feature-grid">
                        <div class="feature-card">
                            <h3>é«˜åˆ©ç‡å›å ±</h3>
                            <p>äº«å—å¸‚å ´é ˜å…ˆçš„å„²è“„åˆ©ç‡ï¼Œè®“æ‚¨çš„è³‡é‡‘ç©©å¥å¢é•·</p>
                        </div>
                        <div class="feature-card">
                            <h3>éˆæ´»å­˜å–</h3>
                            <p>éš¨æ™‚å­˜å–è³‡é‡‘ï¼ŒåŒæ™‚ä¿æŒé«˜æ”¶ç›Š</p>
                        </div>
                        <div class="feature-card">
                            <h3>é›¶æ‰‹çºŒè²»</h3>
                            <p>ç„¡ä»»ä½•éš±è—æ”¶è²»ï¼Œæ¯ä¸€åˆ†éŒ¢éƒ½åœ¨ç‚ºæ‚¨å·¥ä½œ</p>
                        </div>
                    </div>
                </section>

                <section class="calculator">
                    <h2>MOX Flexi boost savings é«˜æ¯æ´»å­˜æ”¶ç›Šè¨ˆç®—æ©Ÿ</h2>
                    
                    <!-- è´§å¸åˆ†é¡µ -->
                    <div class="currency-tabs">
                        <button class="tab-button active" onclick="switchCurrency('hkd', this)">æ¸¯å…ƒ</button>
                        <button class="tab-button" onclick="switchCurrency('usd', this)">ç¾å…ƒ</button>
                    </div>

                    <!-- æ¸¯å…ƒå†…å®¹ -->
                    <div id="hkd-content" class="tab-content active">
                        <div class="phases-container">
                            <!-- ç¬¬ä¸€éšæ®µ -->
                            <div class="phase-section">
                                <div class="phase-title">
                                    <div class="phase-number">1</div>
                                    é¦–éšæ®µï¼ˆé¦–30æ—¥ï¼‰
                                </div>
                                <div class="rate-input-group">
                                    <span class="rate-label">å¹´åˆ©ç‡ï¼š</span>
                                    <input type="number" class="rate-input" id="hkd-phase1-rate" value="0.3" step="0.01" min="0" onchange="calculatePhase('hkd', 1)">
                                    <span class="percent-sign">%</span>
                                </div>
                                <div class="form-group">
                                    <label for="hkd-phase1-amount">å­˜æ¬¾é‡‘é¡ (HKD)</label>
                                    <input type="number" id="hkd-phase1-amount" min="1" value="10000" step="100" onchange="validateAmount('hkd'); calculatePhase('hkd', 1)">
                                </div>
                                <div class="earnings-display" id="hkd-phase1-earnings">
                                    æœŸå…§æ”¶ç›Šï¼š$0.00
                                </div>
                            </div>

                            <!-- ç¬¬äºŒéšæ®µ -->
                            <div class="phase-section">
                                <div class="phase-title">
                                    <div class="phase-number">2</div>
                                    ç¬¬äºŒéšæ®µï¼ˆå…¶å¾Œ30æ—¥ï¼‰
                                </div>
                                <div class="rate-input-group">
                                    <span class="rate-label">å¹´åˆ©ç‡ï¼š</span>
                                    <input type="number" class="rate-input" id="hkd-phase2-rate" value="0.5" step="0.01" min="0" onchange="calculatePhase('hkd', 2)">
                                    <span class="percent-sign">%</span>
                                </div>
                                <div class="form-group">
                                    <label for="hkd-phase2-amount">å­˜æ¬¾é‡‘é¡ (HKD)</label>
                                    <input type="number" id="hkd-phase2-amount" min="1" value="10000" step="100" onchange="validateAmount('hkd'); calculatePhase('hkd', 2)">
                                </div>
                                <div class="earnings-display" id="hkd-phase2-earnings">
                                    æœŸå…§æ”¶ç›Šï¼š$0.00
                                </div>
                            </div>

                            <!-- ç¬¬ä¸‰éšæ®µ -->
                            <div class="phase-section">
                                <div class="phase-title">
                                    <div class="phase-number">3</div>
                                    ç¬¬ä¸‰éšæ®µï¼ˆæœ€å¾Œ30æ—¥ï¼‰
                                </div>
                                <div class="rate-input-group">
                                    <span class="rate-label">å¹´åˆ©ç‡ï¼š</span>
                                    <input type="number" class="rate-input" id="hkd-phase3-rate" value="3" step="0.01" min="0" onchange="calculatePhase('hkd', 3)">
                                    <span class="percent-sign">%</span>
                                </div>
                                <div class="form-group">
                                    <label for="hkd-phase3-amount">å­˜æ¬¾é‡‘é¡ (HKD)</label>
                                    <input type="number" id="hkd-phase3-amount" min="1" value="10000" step="100" onchange="validateAmount('hkd'); calculatePhase('hkd', 3)">
                                </div>
                                <div class="earnings-display" id="hkd-phase3-earnings">
                                    æœŸå…§æ”¶ç›Šï¼š$0.00
                                </div>
                            </div>
                        </div>

                        <!-- ç¸½æ”¶ç›Š -->
                        <div class="result" id="hkd-result">
                            <div class="result-title">ç¸½æ”¶ç›Š</div>
                            <div class="total-result">
                                <div class="total-amount" id="hkd-total-earnings">$0.00</div>
                            </div>
                        </div>

                        <!-- æ¸¯å…ƒæ¯”è¼ƒå·¥å…· -->
                        <div class="comparison-tool">
                            <div class="comparison-header">
                                <h3>èˆ‡ä¸€èˆ¬å®šæœŸå­˜æ¬¾é€²è¡Œæ¯”è¼ƒ</h3>
                                <div class="comparison-selector">
                                    <label for="hkd-comparison-period">é¸æ“‡æ¯”è¼ƒæœŸ</label>
                                    <select id="hkd-comparison-period" onchange="toggleComparisonInputs('hkd')">
                                        <option value="1">1å€‹æœˆå®šæœŸå­˜æ¬¾</option>
                                        <option value="3">3å€‹æœˆå®šæœŸå­˜æ¬¾</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="comparison-content">
                                <!-- 1å€‹æœˆå®šæœŸå­˜æ¬¾æ¯”è¼ƒ -->
                                <div id="hkd-one-month-comparison" class="comparison-section">
                                    <div class="comparison-inputs">
                                        <div class="input-group">
                                            <label for="hkd-month1-rate1">é¦–30æ—¥å®šæœŸå­˜æ¬¾å¹´åˆ©ç‡ (HKD)</label>
                                            <div class="input-wrapper">
                                                <input type="number" id="hkd-month1-rate1" value="0.25" step="0.01" min="0" onchange="calculateComparison('hkd')">
                                                <span class="input-suffix">%</span>
                                            </div>
                                            <div class="reference-earnings" id="hkd-month1-ref1">åƒè€ƒæ”¶ç›Šï¼š$0.00</div>
                                        </div>
                                        <div class="input-group">
                                            <label for="hkd-month1-rate2">å…¶å¾Œ30æ—¥å®šæœŸå­˜æ¬¾å¹´åˆ©ç‡ (HKD)</label>
                                            <div class="input-wrapper">
                                                <input type="number" id="hkd-month1-rate2" value="0.25" step="0.01" min="0" onchange="calculateComparison('hkd')">
                                                <span class="input-suffix">%</span>
                                            </div>
                                            <div class="reference-earnings" id="hkd-month1-ref2">åƒè€ƒæ”¶ç›Šï¼š$0.00</div>
                                        </div>
                                        <div class="input-group">
                                            <label for="hkd-month1-rate3">æœ€å¾Œ30æ—¥å®šæœŸå­˜æ¬¾å¹´åˆ©ç‡ (HKD)</label>
                                            <div class="input-wrapper">
                                                <input type="number" id="hkd-month1-rate3" value="0.25" step="0.01" min="0" onchange="calculateComparison('hkd')">
                                                <span class="input-suffix">%</span>
                                            </div>
                                            <div class="reference-earnings" id="hkd-month1-ref3">åƒè€ƒæ”¶ç›Šï¼š$0.00</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- 3å€‹æœˆå®šæœŸå­˜æ¬¾æ¯”è¼ƒ -->
                                <div id="hkd-three-month-comparison" class="comparison-section" style="display: none;">
                                    <div class="comparison-inputs">
                                        <div class="input-group">
                                            <label for="hkd-month3-rate">3å€‹æœˆå®šæœŸå­˜æ¬¾å¹´åˆ©ç‡ (HKD)</label>
                                            <div class="input-wrapper">
                                                <input type="number" id="hkd-month3-rate" value="1.5" step="0.01" min="0" onchange="calculateComparison('hkd')">
                                                <span class="input-suffix">%</span>
                                            </div>
                                            <div class="reference-earnings" id="hkd-month3-ref">åƒè€ƒæ”¶ç›Šï¼š$0.00</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- æ¯”è¼ƒçµæœ -->
                                <div class="comparison-result">
                                    <div class="result-row">
                                        <div class="result-label">MOX Flexi boost savings é«˜æ¯æ´»å­˜ç¸½æ”¶ç›Š</div>
                                        <div class="result-value" id="hkd-flexi-earnings">$0.00</div>
                                    </div>
                                    <div class="result-row">
                                        <div class="result-label">ä¸€èˆ¬å®šæœŸå­˜æ¬¾ç¸½æ”¶ç›Š</div>
                                        <div class="result-value" id="hkd-fixed-earnings">$0.00</div>
                                    </div>
                                    <div class="result-row highlight">
                                        <div class="result-label">æ”¶ç›Šå·®é¡</div>
                                        <div class="result-value">
                                            <span id="hkd-earnings-difference">$0.00</span>
                                            <span id="hkd-comparison-emoji">ğŸ¤”</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ç¾å…ƒå†…å®¹ -->
                    <div id="usd-content" class="tab-content">
                        <div class="phases-container">
                            <!-- ç¬¬ä¸€éšæ®µ -->
                            <div class="phase-section">
                                <div class="phase-title">
                                    <div class="phase-number">1</div>
                                    é¦–éšæ®µï¼ˆé¦–30æ—¥ï¼‰
                                </div>
                                <div class="rate-input-group">
                                    <span class="rate-label">å¹´åˆ©ç‡ï¼š</span>
                                    <input type="number" class="rate-input" id="usd-phase1-rate" value="1.5" step="0.01" min="0" onchange="calculatePhase('usd', 1)">
                                    <span class="percent-sign">%</span>
                                </div>
                                <div class="form-group">
                                    <label for="usd-phase1-amount">å­˜æ¬¾é‡‘é¡ (USD)</label>
                                    <input type="number" id="usd-phase1-amount" min="1" value="2000" step="100" onchange="validateAmount('usd'); calculatePhase('usd', 1)">
                                </div>
                                <div class="earnings-display" id="usd-phase1-earnings">
                                    æœŸå…§æ”¶ç›Šï¼š$0.00
                                </div>
                            </div>

                            <!-- ç¬¬äºŒéšæ®µ -->
                            <div class="phase-section">
                                <div class="phase-title">
                                    <div class="phase-number">2</div>
                                    ç¬¬äºŒéšæ®µï¼ˆå…¶å¾Œ30æ—¥ï¼‰
                                </div>
                                <div class="rate-input-group">
                                    <span class="rate-label">å¹´åˆ©ç‡ï¼š</span>
                                    <input type="number" class="rate-input" id="usd-phase2-rate" value="3.5" step="0.01" min="0" onchange="calculatePhase('usd', 2)">
                                    <span class="percent-sign">%</span>
                                </div>
                                <div class="form-group">
                                    <label for="usd-phase2-amount">å­˜æ¬¾é‡‘é¡ (USD)</label>
                                    <input type="number" id="usd-phase2-amount" min="1" value="2000" step="100" onchange="validateAmount('usd'); calculatePhase('usd', 2)">
                                </div>
                                <div class="earnings-display" id="usd-phase2-earnings">
                                    æœŸå…§æ”¶ç›Šï¼š$0.00
                                </div>
                            </div>

                            <!-- ç¬¬ä¸‰éšæ®µ -->
                            <div class="phase-section">
                                <div class="phase-title">
                                    <div class="phase-number">3</div>
                                    ç¬¬ä¸‰éšæ®µï¼ˆæœ€å¾Œ30æ—¥ï¼‰
                                </div>
                                <div class="rate-input-group">
                                    <span class="rate-label">å¹´åˆ©ç‡ï¼š</span>
                                    <input type="number" class="rate-input" id="usd-phase3-rate" value="6" step="0.01" min="0" onchange="calculatePhase('usd', 3)">
                                    <span class="percent-sign">%</span>
                                </div>
                                <div class="form-group">
                                    <label for="usd-phase3-amount">å­˜æ¬¾é‡‘é¡ (USD)</label>
                                    <input type="number" id="usd-phase3-amount" min="1" value="2000" step="100" onchange="validateAmount('usd'); calculatePhase('usd', 3)">
                                </div>
                                <div class="earnings-display" id="usd-phase3-earnings">
                                    æœŸå…§æ”¶ç›Šï¼š$0.00
                                </div>
                            </div>
                        </div>

                        <!-- ç¸½æ”¶ç›Š -->
                        <div class="result" id="usd-result">
                            <div class="result-title">ç¸½æ”¶ç›Š</div>
                            <div class="total-result">
                                <div class="total-amount" id="usd-total-earnings">$0.00</div>
                            </div>
                        </div>

                        <!-- ç¾å…ƒæ¯”è¼ƒå·¥å…· -->
                        <div class="comparison-tool">
                            <div class="comparison-header">
                                <h3>èˆ‡ä¸€èˆ¬å®šæœŸå­˜æ¬¾é€²è¡Œæ¯”è¼ƒ</h3>
                                <div class="comparison-selector">
                                    <label for="usd-comparison-period">é¸æ“‡æ¯”è¼ƒæœŸ</label>
                                    <select id="usd-comparison-period" onchange="toggleComparisonInputs('usd')">
                                        <option value="1">1å€‹æœˆå®šæœŸå­˜æ¬¾</option>
                                        <option value="3">3å€‹æœˆå®šæœŸå­˜æ¬¾</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="comparison-content">
                                <!-- 1å€‹æœˆå®šæœŸå­˜æ¬¾æ¯”è¼ƒ -->
                                <div id="usd-one-month-comparison" class="comparison-section">
                                    <div class="comparison-inputs">
                                        <div class="input-group">
                                            <label for="usd-month1-rate1">é¦–30æ—¥å®šæœŸå­˜æ¬¾å¹´åˆ©ç‡ (USD)</label>
                                            <div class="input-wrapper">
                                                <input type="number" id="usd-month1-rate1" value="2.7" step="0.01" min="0" onchange="calculateComparison('usd')">
                                                <span class="input-suffix">%</span>
                                            </div>
                                            <div class="reference-earnings" id="usd-month1-ref1">åƒè€ƒæ”¶ç›Šï¼š$0.00</div>
                                        </div>
                                        <div class="input-group">
                                            <label for="usd-month1-rate2">å…¶å¾Œ30æ—¥å®šæœŸå­˜æ¬¾å¹´åˆ©ç‡ (USD)</label>
                                            <div class="input-wrapper">
                                                <input type="number" id="usd-month1-rate2" value="2.7" step="0.01" min="0" onchange="calculateComparison('usd')">
                                                <span class="input-suffix">%</span>
                                            </div>
                                            <div class="reference-earnings" id="usd-month1-ref2">åƒè€ƒæ”¶ç›Šï¼š$0.00</div>
                                        </div>
                                        <div class="input-group">
                                            <label for="usd-month1-rate3">æœ€å¾Œ30æ—¥å®šæœŸå­˜æ¬¾å¹´åˆ©ç‡ (USD)</label>
                                            <div class="input-wrapper">
                                                <input type="number" id="usd-month1-rate3" value="2.7" step="0.01" min="0" onchange="calculateComparison('usd')">
                                                <span class="input-suffix">%</span>
                                            </div>
                                            <div class="reference-earnings" id="usd-month1-ref3">åƒè€ƒæ”¶ç›Šï¼š$0.00</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- 3å€‹æœˆå®šæœŸå­˜æ¬¾æ¯”è¼ƒ -->
                                <div id="usd-three-month-comparison" class="comparison-section" style="display: none;">
                                    <div class="comparison-inputs">
                                        <div class="input-group">
                                            <label for="usd-month3-rate">3å€‹æœˆå®šæœŸå­˜æ¬¾å¹´åˆ©ç‡ (USD)</label>
                                            <div class="input-wrapper">
                                                <input type="number" id="usd-month3-rate" value="3.5" step="0.01" min="0" onchange="calculateComparison('usd')">
                                                <span class="input-suffix">%</span>
                                            </div>
                                            <div class="reference-earnings" id="usd-month3-ref">åƒè€ƒæ”¶ç›Šï¼š$0.00</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- æ¯”è¼ƒçµæœ -->
                                <div class="comparison-result">
                                    <div class="result-row">
                                        <div class="result-label">MOX Flexi boost savings é«˜æ¯æ´»å­˜ç¸½æ”¶ç›Š</div>
                                        <div class="result-value" id="usd-flexi-earnings">$0.00</div>
                                    </div>
                                    <div class="result-row">
                                        <div class="result-label">ä¸€èˆ¬å®šæœŸå­˜æ¬¾ç¸½æ”¶ç›Š</div>
                                        <div class="result-value" id="usd-fixed-earnings">$0.00</div>
                                    </div>
                                    <div class="result-row highlight">
                                        <div class="result-label">æ”¶ç›Šå·®é¡</div>
                                        <div class="result-value">
                                            <span id="usd-earnings-difference">$0.00</span>
                                            <span id="usd-comparison-emoji">ğŸ¤”</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="referral-section">
                        <div class="referral-title">è€Best å¥½å‹æ¨è–¦ä»£ç¢¼</div>
                        <div class="referral-code">DHEGEW</div>
                        <div class="referral-expiry">å„ªæƒ è‡³2025å¹´9æœˆ3æ—¥</div>
                        <p class="referral-description">
                            é€éè€Bestå¥½å‹æ¨è–¦ç”³è«‹ï¼Œå¯ä»¤è€Bestæ”¶åˆ°ä¸€äº›æ¨è–¦å›è´ˆ, é›–ç„¶ä¸èƒ½ä»¤è€Bestç™¼å®¶è‡³å¯Œï¼Œä½†ä»¤è€Bestå¿ƒæ‡·æ„Ÿæ¿€åŠå®‰æ…°ã€‚
                        </p>
                    </div>

                    <div class="note">
                        <strong>æ³¨æ„ï¼š</strong>
                        <ul>
                            <li>ä»¥ä¸Šè¨ˆç®—çµæœåƒ…ä¾›åƒè€ƒï¼Œå¯¦éš›æ”¶ç›Šå¯èƒ½å› å¸‚å ´æƒ…æ³è€Œæœ‰æ‰€è®Šå‹•</li>
                            <li>æ”¶ç›Šè¨ˆç®—åŸºæ–¼å–®åˆ©è¨ˆç®—æ–¹å¼</li>
                            <li>æ¸¯å…ƒä¸€å¹´æŒ‰365å¤©è¨ˆç®—ï¼Œç¾å…ƒä¸€å¹´æŒ‰360å¤©è¨ˆç®—</li>
                            <li>å¯¦éš›åˆ©ç‡ä»¥éŠ€è¡Œå…¬ä½ˆç‚ºæº–</li>
                            <li>è©³æƒ…è«‹åƒè€ƒç”¢å“ç¶²é ï¼š<a href="https://mox.com/zh/promotions/flexiboostsavings/" target="_blank">https://mox.com/zh/promotions/flexiboostsavings/</a></li>
                        </ul>
                    </div>
                </section>
            </main>

            <!-- é¡µé¢åº•éƒ¨ FOOTER - å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
            <footer>
                <!-- Footerå†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
            </footer>
        </div>
    </div>

    <!-- æç¤ºæ¡† -->
    <div class="overlay" id="overlay"></div>
    <div class="alert" id="alert">
        <div class="alert-title">å­˜æ¬¾é‡‘é¡æç¤º</div>
        <div class="alert-message" id="alert-message"></div>
        <button class="alert-button" onclick="closeAlert()">ç¢ºå®š</button>
    </div>

    <script src="common.js"></script>
    <script>
        let currentCurrency = 'hkd';

        // æ ¼å¼åŒ–é‡‘é¡ï¼Œæ·»åŠ åƒä½ç¬¦è™Ÿ
        function formatAmount(amount) {
            return amount.toLocaleString('en-US', {
                minimumFractionDigits: 2,
                maximumFractionDigits: 2
            });
        }

        function switchCurrency(currency, buttonElement) {
            // æ›´æ–°åˆ†é¡µæŒ‰é’®çŠ¶æ€
            document.querySelectorAll('.tab-button').forEach(button => {
                button.classList.remove('active');
            });
            buttonElement.classList.add('active');

            // æ›´æ–°å†…å®¹æ˜¾ç¤º
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(`${currency}-content`).classList.add('active');

            currentCurrency = currency;
            
            // é‡æ–°è®¡ç®—æ€»æ”¶ç›Š
            calculateTotal();
            calculateComparison(currency);
        }

        function validateAmount(currency) {
            const minAmount = currency === 'hkd' ? 10000 : 2000;
            const maxAmount = currency === 'hkd' ? 10000000 : 1300000;
            
            for (let i = 1; i <= 3; i++) {
                const amount = parseFloat(document.getElementById(`${currency}-phase${i}-amount`).value) || 0;
                
                if (amount < minAmount) {
                    showAlert(`å­˜æ¬¾é‡‘é¡ä¸èƒ½å°‘æ–¼ ${currency === 'hkd' ? 'HK$' : 'US$'}${formatAmount(minAmount)}`);
                    document.getElementById(`${currency}-phase${i}-amount`).value = minAmount;
                    return;
                }
                
                if (amount > maxAmount) {
                    showAlert(`å­˜æ¬¾é‡‘é¡ä¸èƒ½å¤šæ–¼ ${currency === 'hkd' ? 'HK$' : 'US$'}${formatAmount(maxAmount)}`);
                    document.getElementById(`${currency}-phase${i}-amount`).value = maxAmount;
                    return;
                }
            }
        }

        function showAlert(message) {
            document.getElementById('alert-message').textContent = message;
            document.getElementById('alert').classList.add('show');
            document.getElementById('overlay').classList.add('show');
        }

        function closeAlert() {
            document.getElementById('alert').classList.remove('show');
            document.getElementById('overlay').classList.remove('show');
        }

        function calculatePhase(currency, phase) {
            const amount = parseFloat(document.getElementById(`${currency}-phase${phase}-amount`).value) || 0;
            const rate = parseFloat(document.getElementById(`${currency}-phase${phase}-rate`).value) || 0;
            
            // æ¯ä¸ªé˜¶æ®µéƒ½æ˜¯30å¤©
            const daysInPhase = 30;
            
            // æ ¹æ®è´§å¸é€‰æ‹©ä¸åŒçš„å¤©æ•°
            const daysInYear = currency === 'hkd' ? 365 : 360;
            const earnings = amount * (rate / 100 / daysInYear) * daysInPhase;
            
            // æ›´æ–°é˜¶æ®µæ”¶ç›Šæ˜¾ç¤º
            document.getElementById(`${currency}-phase${phase}-earnings`).textContent = 
                `æœŸå…§æ”¶ç›Šï¼š$${formatAmount(earnings)}`;
            
            // å¦‚æœæ˜¯å½“å‰æ˜¾ç¤ºçš„è´§å¸ï¼Œæ›´æ–°æ€»æ”¶ç›Š
            if (currency === currentCurrency) {
                calculateTotal();
                calculateComparison(currency);
            }
        }

        function calculateTotal() {
            let totalEarnings = 0;
            
            // è®¡ç®—å½“å‰è´§å¸æ‰€æœ‰é˜¶æ®µçš„æ”¶ç›Šæ€»å’Œ
            for (let i = 1; i <= 3; i++) {
                const amount = parseFloat(document.getElementById(`${currentCurrency}-phase${i}-amount`).value) || 0;
                const rate = parseFloat(document.getElementById(`${currentCurrency}-phase${i}-rate`).value) || 0;
                
                // æ¯ä¸ªé˜¶æ®µéƒ½æ˜¯30å¤©
                const daysInPhase = 30;
                
                // æ ¹æ®è´§å¸é€‰æ‹©ä¸åŒçš„å¤©æ•°
                const daysInYear = currentCurrency === 'hkd' ? 365 : 360;
                const earnings = amount * (rate / 100 / daysInYear) * daysInPhase;
                totalEarnings += earnings;
            }
            
            // æ›´æ–°æ€»æ”¶ç›Šæ˜¾ç¤º
            document.getElementById(`${currentCurrency}-total-earnings`).textContent = 
                `$${formatAmount(totalEarnings)}`;
                
            return totalEarnings;
        }

        // åˆ‡æ›æ¯”è¼ƒè¼¸å…¥æ¡†
        function toggleComparisonInputs(currency) {
            const period = document.getElementById(`${currency}-comparison-period`).value;
            const oneMonthComparison = document.getElementById(`${currency}-one-month-comparison`);
            const threeMonthComparison = document.getElementById(`${currency}-three-month-comparison`);
            
            if (period === '1') {
                oneMonthComparison.style.display = 'block';
                threeMonthComparison.style.display = 'none';
            } else {
                oneMonthComparison.style.display = 'none';
                threeMonthComparison.style.display = 'block';
            }
            
            calculateComparison(currency);
        }

        // è¨ˆç®—æ¯”è¼ƒçµæœ
        function calculateComparison(currency) {
            const flexiEarnings = calculateTotal();
            let fixedEarnings = 0;
            const period = document.getElementById(`${currency}-comparison-period`).value;
            
            if (period === '1') {
                // 1å€‹æœˆå®šæœŸå­˜æ¬¾æ¯”è¼ƒ
                for (let i = 1; i <= 3; i++) {
                    const amount = parseFloat(document.getElementById(`${currency}-phase${i}-amount`).value) || 0;
                    const rate = parseFloat(document.getElementById(`${currency}-month1-rate${i}`).value) || 0;
                    
                    const daysInPhase = 30;
                    const daysInYear = currency === 'hkd' ? 365 : 360;
                    const earnings = amount * (rate / 100 / daysInYear) * daysInPhase;
                    fixedEarnings += earnings;
                    
                    // æ›´æ–°å‚è€ƒæ”¶ç›Šæ˜¾ç¤º
                    document.getElementById(`${currency}-month1-ref${i}`).textContent = 
                        `åƒè€ƒæ”¶ç›Šï¼š$${formatAmount(earnings)}`;
                }
            } else {
                // 3å€‹æœˆå®šæœŸå­˜æ¬¾æ¯”è¼ƒ
                const amount = parseFloat(document.getElementById(`${currency}-phase1-amount`).value) || 0;
                const rate = parseFloat(document.getElementById(`${currency}-month3-rate`).value) || 0;
                
                const daysInPeriod = 90; // 3å€‹æœˆ
                const daysInYear = currency === 'hkd' ? 365 : 360;
                fixedEarnings = amount * (rate / 100 / daysInYear) * daysInPeriod;
                
                // æ›´æ–°å‚è€ƒæ”¶ç›Šæ˜¾ç¤º
                document.getElementById(`${currency}-month3-ref`).textContent = 
                    `åƒè€ƒæ”¶ç›Šï¼š$${formatAmount(fixedEarnings)}`;
            }
            
            // æ›´æ–°æ¯”è¼ƒçµæœé¡¯ç¤º
            document.getElementById(`${currency}-flexi-earnings`).textContent = `$${formatAmount(flexiEarnings)}`;
            document.getElementById(`${currency}-fixed-earnings`).textContent = `$${formatAmount(fixedEarnings)}`;
            
            const difference = flexiEarnings - fixedEarnings;
            const differenceElement = document.getElementById(`${currency}-earnings-difference`);
            differenceElement.textContent = `${difference >= 0 ? '+' : ''}$${formatAmount(Math.abs(difference))}`;
            
            // æ›´æ–°æ¯”è¼ƒçµæœè¡¨æƒ…ç¬¦è™Ÿ
            const emojiElement = document.getElementById(`${currency}-comparison-emoji`);
            if (difference > 0) {
                emojiElement.textContent = 'ğŸ˜'; // MOXæ”¶ç›Šæ›´é«˜
            } else if (difference < 0) {
                emojiElement.textContent = 'ğŸ˜¢'; // å®šæœŸå­˜æ¬¾æ”¶ç›Šæ›´é«˜
            } else {
                emojiElement.textContent = 'ğŸ¤'; // æ”¶ç›Šç›¸åŒ
            }
        }

        // é¡µé¢åŠ è½½æ—¶è®¡ç®—ä¸€æ¬¡
        window.onload = function() {
            // è®¡ç®—æ‰€æœ‰é˜¶æ®µçš„æ”¶ç›Š
            ['hkd', 'usd'].forEach(currency => {
                for (let i = 1; i <= 3; i++) {
                    calculatePhase(currency, i);
                }
            });
            
            // åˆå§‹åŒ–æ¯”è¾ƒå·¥å…·
            calculateComparison('hkd');
            calculateComparison('usd');
        };
    </script>
</body>
</html>
